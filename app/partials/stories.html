<script>
        function toggle_visibility(id) {
           var e = document.getElementById(id);
           if(e.style.display == 'block')
              e.style.display = 'none';
           else
              e.style.display = 'block';
        }
    </script>
 <!-- select2 -->

<!--wrapper-->
    <div id="wrapper">
        <div side-bar>
        </div>
        
        <!--page wrapper-->
        <div id="page-wrapper" class="gray-bg">
            
            <div nav-menu></div>
         
            <!--header title-->
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-9">
                    <h2><i class="fa fa-clone"></i> ticket details</h2>
                    <ol class="breadcrumb" ng-if="!isclient">
                        <li>
                           {{username}}
                        </li>
                        <li>
                            projects
                        </li>
                        <li>
                            {{company_name}}
                        </li>
                        <li>
                            {{project_name}}
                        </li>
                        <li>
                          {{ticket_name}}
                        </li>
                    </ol>
                    <ol class="breadcrumb" ng-if="isclient">
                        <li>
                             {{company_name}}
                        </li>
                        <li>
                            projects
                        </li>
                        <li>
                            {{project_name}}
                        </li>
                        <li>
                             {{ticket_name}}
                        </li>
                    </ol>
                </div>
            </div>
            <!--end header title-->

            <!--main-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="wrapper wrapper-content animated fadeInUp pb20">
                        <!-- buttons & team -->
                        <div class="row">
                            <div class="col-md-6">
                                <a class="btn btn-default btn-bitbucket btn-m mr5" ng-click="backToProject()"><i class="fa fa-angle-left mr5"></i> back to project</a>
                                <a class="btn btn-default btn-bitbucket btn-m mr5 btnCopy" data-clipboard-text="{{currentUrl}}"><i class="fa fa-link mr5"></i> copy link</a>
                                <a class="btn btn-default btn-bitbucket btn-m mr5"ng-click="openKeybox()"><i class="fa fa-lock mr5"></i> keybox</a>
                            </div>
                            <div class="col-md-6">
                                <div class="project-people">
                                    <a href="" class="team-lead" ng-repeat="member in team" ng-if='member.isTeamLeader' ><img alt="{{member.name}}"  class="img-circle" src="{{member.photo}}"></a>
                                    <a href="" ng-repeat="member in team" ng-if='!member.isTeamLeader'><img alt="{{member.name}}" class="img-circle" src="{{member.photo}}"></a>
                                </div>
                            </div>
                        </div>
                        <!-- end buttons & team -->
                    </div>
                </div>
            </div>

            <div class="wrapper wrapper-content animated fadeInUp pt0">
            <div class="row">
               
                    <div class="col-lg-9">
                        <div class="ibox">
                                <div class="ibox-content">
                                    <!-- header title area -->
                                    <div class="row row m0">
                                        <div class="col-lg-12 p0 pb15 project-details-box">
                                            <div class="col-lg-8 pl0">
                                                <div class="project-details-title">
                                                    <div class="project-details-title-box mb5">  
                                                        <i class="fa fa-star project-details-type-icon mr5 mt5" ng-if="ticket_type==tickettypes[1].type"></i>
                                                        <i class="fa fa-bug project-details-type-icon mr5 mt5" ng-if="ticket_type==tickettypes[2].type"></i>
                                                        <i class="fa fa-file project-details-type-icon mr5 mt5" ng-if="ticket_type==tickettypes[3].type"></i>
                                                        <i class="fa fa-tint project-details-type-icon mr5 mt5" ng-if="ticket_type==tickettypes[4].type"></i>
                                                        <h2 class="project-title-h2"> {{ticket_name}}</h2>
                                                        <div class="clear-both"></div>
                                                    </div>
                                                    <div class="project-details-title-box">
                                                        <span class="project-details-title-id">#{{ticket_id}}</span>
                                                        <span class="project-details-title-minus">|</span>
                                                        <a class="project-details-see-description" onclick="toggle_visibility('ticket-description');">see description <i class="fa fa-angle-down"></i></a>
                                                        <a ng-if="!isclient && ticket_status==ticketStatus.Reject.status" class="project-details-see-reject" data-toggle="modal" data-target="#reject-messages">see reject messages <i class="fa fa-commenting"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 pr0 aright" ng-if="ticket_status!=ticketStatus.Draft.status && ticket_status!=ticketStatus.Estimation.status">
                                            <div class="" style="display: inline-block;text-align: right; margin-right: 10px;padding-right:10px; border-right: 1px solid #eee;" ng-if="ticket_estimation!=null" >
                                                <span class="">Estimation</span>
                                                <h2 class="">
                                                  <span class="hour">{{ticket_estimation}} h</span>
                                                </h2>
                                              </div>
                                              <div class="" style="display: inline-block;text-align: left" ng-if="ticket_realtime!=null">
                                                <span class="">Real Time</span>
                                                <h2 class="bold">
                                                  <span class="hour">{{ticket_realtime}} h</span>
                                                </h2>
                                              </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row none" id="ticket-description">
                                        <div class="col-lg-12" ng-bind-html="ticket_decription">
                                        </div>
                                    </div>

                                    <!-- status area -->
                                    <div class="row" ng-if="isTeamLeader || isAdmin">
                                        <div class="col-lg-12 pt0 pb20" >
                                            <div class="project-details-status-area p10">
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Draft.status">
                                                   <span class="label label-default label-nobg"><i class="fa fa-genderless"></i> draft</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Estimation.status">
                                                   <button class="btn btn-primary btn-bitbucket btn-xs" type="button" ng-click="addStory(null)"><i class="fa fa-plus mr5"></i> add story</button>
                                                   <button type="button" class="btn btn-danger btn-xs" ng-click="sendToClient()"><i class="fa fa-chevron-right"></i> send to client</button>
                                                   <small>client started ticket</small>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Goproduction.status">
                                                   <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> waiting confirmation</span>
                                                  
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Waiting.status">
                                                   <button type="button" class="btn btn-success btn-xs" ng-click="sendToProduction()"><i class="fa fa-chevron-right"></i> send to production</button>
                                                    <small>client confirmed estimation</small>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Production.status">
                                                    <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in production ({{totaltasks}}/{{finishedtasks}})</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Accept.status">
                                                   <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in acceptance</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Testing.status">
                                                    <button class="btn btn-primary btn-bitbucket btn-xs" type="button" ng-click="openAddBug(null)" ng-if="isTeamLeader"><i class="fa fa-plus mr5"></i> add bug</button>
                                                    <button type="button" class="btn btn-danger btn-xs" ng-click='deliverToclient()'><i class="fa fa-chevron-right"></i> deliver ticket</button>
                                                   <small>all stories done</small>
                                                </div> 
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Reject.status">
                                                   <button type="button" class="btn btn-danger btn-xs fxw-alert-reject-ticket" data-target="#reject-messages" data-toggle="modal"><i class="fa fa-commenting"></i> see messages</button>
                                                   <small>client reject ticket</small>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Done.status">
                                                   <span class="label label-default label-nobg"><i class="fa fa-check"></i> done</span>
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                    </div>
                                    </div>
                                    <div class="row" ng-if="isMember">
                                        <div class="col-lg-12 pt0 pb20">
                                            <div class="project-details-status-area p10">
                                               <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Draft.status">
                                                    <span class="label label-default label-nobg"><i class="fa fa-genderless"></i> draft</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Estimation.status">
                                                   <button class="btn btn-primary btn-bitbucket btn-xs" type="button" ng-click="addStory(null)"><i class="fa fa-plus mr5"></i> add story</button>
                                                    <small>client started ticket</small>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Goproduction.status">
                                                    <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> waiting confirmation</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Waiting.status">
                                                   <span class="label label-default label-nobg"><i class="fa fa-genderless"></i> waiting ({{totaltasks}}/{{finishedtasks}})</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Production.status">
                                                    <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in production ({{totaltasks}}/{{finishedtasks}})</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Accept.status">
                                                   <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in acceptance</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Testing.status">
                                                    <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in QA</span>
                                                </div> 
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Reject.status">
                                                    <span class="label label-default label-nobg">Rejected</span>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Done.status">
                                                    <span class="label label-default label-nobg"><i class="fa fa-check"></i> done</span>
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-if="isclient">
                                        <div class="col-lg-12 pt0 pb20">
                                            <div class="project-details-status-area p10">
                                              <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Draft.status">
                                                   <button type="button" class="btn btn-primary btn-xs fxw-alert-start-estimation " ng-click="startEstimation()"><i class="fa fa-chevron-right"></i> start</button>
                                                   <small>please start estimation</small>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Estimation.status">
                                                   <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in estimation</span>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Goproduction.status">
                                                 <button type="button"  ng-click='acceptEstimation()' class="btn btn-primary btn-xs fxw-alert-confirm-estimation"><i class="fa fa-chevron-right"></i> confirm</button>
                                                 <button type="button" class="btn btn-danger btn-xs fxw-alert-reject-ticket" ng-click="rejectEstimation()"><i class="fa fa-plus mr5"></i> re-edit</button>
                                                 <small>please confirm for production</small>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Waiting.status">
                                                     <span class="label label-default label-nobg"><i class="fa fa-genderless"></i> waiting ({{totaltasks}}/{{finishedtasks}})</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Production.status">
                                                    <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in production ({{totaltasks}}/{{finishedtasks}})</span>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Accept.status">
                                                   <button ng-click="acceptTicket()" type="button" class="btn btn-primary btn-xs fxw-alert-accept-ticket"><i class="fa fa-chevron-right" ></i> acccept</button>
                                                   <button type="button" class="btn btn-danger btn-xs fxw-alert-reject-ticket" ng-click="openAddBug(null)"><i class="fa fa-undo"></i> add bug</button>
                                                   <small>please accept &amp; close ticket</small>
                                                </div>
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Testing.status">
                                                   <span class="label label-default label-nobg"><img src="img/ellipsis.gif" width="15" height="15"> in QA</span>
                                                </div> 
                                                <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Reject.status">
                                                   <span class="label label-default label-nobg">Rejected</span>
                                                </div>
                                                 <div class="col-lg-12 project-status p5 aright" ng-if="ticket_status==ticketStatus.Done.status">
                                                   <span class="label label-default label-nobg"><i class="fa fa-check"></i> done</span>
                                                </div>
                                                <div class="clear-both"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- task area -->
                                    <div class="row"  ng-if="ticket_status!=ticketStatus.Draft.status">
                                        <div class="col-lg-12">
                                            <!-- table project list -->
                                            <div class="project-list">
                                                <div class="table-responsive">
                                                    <table class="table table-hover responsive">
                                                    <tbody>
                                                        <tr>
                                                            <td width="50" class="project-table-head"></td>
                                                            <td width="150" class="project-table-head">ID</td>
                                                            <td width="1100" class="project-table-head">Tasks</td>
                                                            <td width="100" class="project-table-head">Estimation</td>
                                                            <td width="100" class="project-table-head">Realtime</td>
                                                            <td width="250" class="project-table-head">Status</td>
                                                            <td width="500" class="project-table-head aright" ng-if="!isclient">Action</td>
                                                        </tr>

                                                        <tr ng-repeat="story in tasks">
                                                            <td class="project-type">
                                                                <i class="fa fa-angle-right"></i>
                                                            </td>
                                                            <td class="project-id">
                                                                {{story.displayid}}
                                                            </td>
                                                            <td class="project-title">
                                                                {{story.title}}
                                                                 <small ng-if="story.assignto!=null">Assign to: <b>{{story.assignto.name}}</b></small>
                                                                 <small ng-if="story.assignto==null">Not assigned</b></small>
                                                                  <!-- <a class="project-details-see-description" name="{{story.id}}" onClick="toggle_visibility(this.name);">see description <i class="fa fa-angle-down"></i></a>
                                                                  <span class="row none" id="{{story.id}}"><small ng-bind-html="story.description"></small></span> -->
                                                            </td>
                                                            <td class="project-estimation" ng-if="isclient && story.estimation!=null">
                                                                <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.estimation}} h</span>
                                                            </td>
                                                            <td class="project-estimation" ng-if="isclient && story.estimation==null">
                                                                
                                                            </td>
                                                             <td class="project-estimation" ng-if="!isclient &&  story.estimation==null">
                                                                <button type="button" class="btn btn-primary btn-bitbucket btn-xs" ng-click="openAddEstimation(null,story)"><i class="fa fa-plus mr5"></i> add</button>
                                                             </td>
                                                              <td class="project-estimation" ng-if="!isclient && story.estimation!=null">                                                    
                                                                <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.estimation}} h</span>
                                                                <a ng-if="story.type!=taskTypes.Bug.type && ticket_status==ticketStatus.Estimation.status" ng-click="openAddEstimation(story.estimation,story)"><small>edit</small></a>
                                                             </td>
                                                            <td class="project-realtime" ng-if="isclient && story.realtime!=null && ticket_status!=ticketStatus.Production.status">
                                                                <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.realtime}} h</span>
                                                            </td>
                                                            <td class="project-realtime" ng-if="isclient && story.realtime!=null && ticket_status==ticketStatus.Production.status">
                                                            </td>
                                                             <td class="project-realtime" ng-if="isclient && story.realtime==null">
                                                               
                                                            </td>
                                                             <td class="project-realtime" ng-if="!isclient  && story.realtime==null && !story.isstarted">
                                                               
                                                            </td>
                                                            <td class="project-realtime" ng-if="!isclient && story.realtime==null  && story.isstarted && story.workedhours==0">
                                                                <button ng-click="openAddRealtime(null,story)" type="button" class="btn btn-primary btn-bitbucket btn-xs"><i class="fa fa-plus mr5"></i> add</button>
                                                            </td>
                                                            <td class="project-realtime" ng-if="!isclient && story.realtime==null && story.isstarted && story.workedhours!=0 && !story.finished">
                                                                <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.workedhours}} h</span>
                                                                <a  ng-click="openAddRealtime(null,story)"><small>+ add</small></a>
                                                            </td>
                                                             <td class="project-realtime" ng-if="!isclient &&  story.realtime!=null">
                                                                 <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.realtime}} h</span>
                                                                
                                                            </td>
                                                            <td class="project-realtime" ng-if="!isclient && story.finished && story.realtime==null ">
                                                                 <i class="fa fa-clock-o"></i> 
                                                                <span class="hour">{{story.workedhours}} h</span>
                                                                <a  ng-click="openAddRealtime(null,story)"><small>+ add</small></a>
                                                                
                                                            </td>
                                                            <td class="project-status" ng-if="isclient">
                                                                 <span class="label label-default label-nobg" ng-if="!story.isstarted && story.accepted"><i class="fa fa-genderless"></i> waiting</span>
                                                                 <span class="label label-default label-nobg" ng-if="story.isstarted && !story.finished"><i class="fa fa-genderless"></i> production</span>
                                                                  <span class="label label-default label-nobg" ng-if="story.finished"><i class="fa fa-check"></i> finished</span>
                                                                   <span class="label label-default label-nobg" ng-if="!story.accepted"><i class="fa fa-check"></i> in acceptance</span>
                                                            </td>
                                                             <td class="project-status" ng-if="!isclient">
                                                                 <button ng-if="story.accepted && !story.isstarted" type="button" class="btn btn-primary btn-bitbucket btn-xs" ng-click='startTask(story)'>start</button>
                                                                <button ng-if="story.accepted && story.isstarted && !story.finished" type="button" class="btn btn-primary btn-bitbucket btn-xs" ng-click="finishTask(story)">finish</button>
                                                                <span class="label label-default label-nobg" ng-if="story.finished"><i class="fa fa-check"></i> finished</span>
                                                                <span class="label label-default label-nobg" ng-if="!story.accepted && !isTeamLeader"><i class="fa fa-check"></i> in acceptance</span>
                                                                <span class="label label-default label-nobg" ng-if="!story.accepted && isTeamLeader">
                                                                    <button type="button" ng-click="AcceptBug(story,true)" class="btn btn-primary btn-bitbucket btn-xs"><i class="fa fa-chevron-right" ></i> accept</button>
                                                                    <button type="button" ng-click="AcceptBug(story,false)" class="btn btn-danger btn-bitbucket btn-xs"><i class="fa fa-undo"></i> reject</button>
                                                                </span>
                                                            </td>
                                                            <td class="project-action" ng-if="!isclient && story.type!=taskTypes.Bug.type">
                                                                <button class="btn btn-white btn-sm" type="button" ng-click="addStory(story)" ng-if="ticket_status==ticketStatus.Estimation.status"><i class="fa fa-pencil"></i> </button>
                                                                <button class="btn btn-white btn-sm fxw-alert-delete" type="button" ng-if="ticket_status==ticketStatus.Estimation.status" ng-click="deleteTask(story)"><i class="fa fa-trash"></i> </button>
                                                            </td >
                                                            <td class="project-action" ng-if="isTeamLeader && story.type==taskTypes.Bug.type">
                                                                 <button class="btn btn-white btn-sm" type="button" ng-click="openAddBug(story)"><i class="fa fa-pencil"></i> </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <!-- end table project list-->
                                        </div>
                                    </div>

                                    <!-- notification-->
                                    <!-- <div class="row m-t-sm">
                                        <div class="col-lg-12">
                                            <div class="panel blank-panel">
                                                <div class="panel-heading">
                                                    <div class="panel-options">
                                                        <ul class="nav nav-tabs">
                                                            <li class="active"><a href="#tab-1" data-toggle="tab"><i class="fa fa-circle-o"></i> All</a></li>
                                                            <li class=""><a href="#tab-2" data-toggle="tab"><i class="fa fa-circle-o"></i>flexwork</a></li>
                                                            <li class=""><a href="#tab-3" data-toggle="tab"><i class="fa fa-circle-o"></i>Pivotal Tracker</a></li>
                                                            <li class=""><a href="#tab-4" data-toggle="tab"><i class="fa fa-github"></i> GitHub</a></li>
                                                        </ul>
                                                    </div>
                                                </div>

                                                <div class="panel-body pt0">
                                                    <div class="tab-content">
                                                        <div class="tab-pane active" id="tab-1">
                                                            <div class="table-responsive">
                                                                <table class="table table-hover notification">
                                                                    <tbody>

                                                                         <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_pt_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">Mahdi</td>
                                                                            <td class="notification-status"><span class="label label-default"><i class="fa fa-plus"></i> added</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-star project-type"></i> feature</span></td>
                                                                            <td class="notification-title">Final Design</td>
                                                                            <td class="notification-action">
                                                                                <button role="button" class="btn btn-white btn-sm" type="button"><i class="fa fa-external-link"></i></button>
                                                                            </td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_pt_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">Mahdi</td>
                                                                            <td class="notification-status"><span class="label label-default"><i class="fa fa-plus"></i> added</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-star project-type"></i> feature</span></td>
                                                                            <td class="notification-title">Draft Design</td>
                                                                            <td class="notification-action">
                                                                                <button role="button" class="btn btn-white btn-sm" type="button"><i class="fa fa-external-link"></i></button>
                                                                            </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_fx_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">Muhammed</td>
                                                                            <td class="notification-status"><span class="label label-info"><i class="fa fa-check"></i> confirmed</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-tint project-type"></i> design</span></td>
                                                                            <td class="notification-title">Business cards for flexwork</td>
                                                                            <td class="notification-action"></td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_fx_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">flexteam</td>
                                                                            <td class="notification-status"><span class="label label-warning"><i class="fa fa-sign-in"></i> delivered estimate</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-tint project-type"></i> design</span></td>
                                                                            <td class="notification-title">Business cards for flexwork</td>
                                                                            <td class="notification-action"></td>
                                                                        </tr>

                                                                        
                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_fx_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">flexteam</td>
                                                                            <td class="notification-status"><span class="label label-default"><i class="fa fa-circle"></i> estimated</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-tint project-type"></i> design</span></td>
                                                                            <td class="notification-title">Business cards for flexwork</td>
                                                                            <td class="notification-action"></td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_fx_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">Muhammed</td>
                                                                            <td class="notification-status"><span class="label label-info"><i class="fa fa-chevron-right"></i> started</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-tint project-type"></i> design</span></td>
                                                                            <td class="notification-title">Business cards for flexwork</td>
                                                                            <td class="notification-action"></td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td class="notification-avatar"><img alt="image" class="img-circle" src="img/users/profile_fx_small.jpg" alt="image"> </td>
                                                                            <td class="notification-date">2 Dec 2015 <br/>3:23pm</td>
                                                                            <td class="notification-name">Muhammed</td>
                                                                            <td class="notification-status"><span class="label label-default"><i class="fa fa-plus"></i> added</span></td>
                                                                            <td class="notification-type"><span class="feature"><i class="fa fa-tint project-type"></i> design</span></td>
                                                                            <td class="notification-title">Business cards for flexwork</td>
                                                                            <td class="notification-action"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>

                                                        <div class="tab-pane" id="tab-2">
                                                            <div class="table-responsive">
                                                                <table class="table table-hover notification">
                                                                   <tbody>
                                                                        
                                                                    </tbody> 
                                                                </table>
                                                            </div>
                                                        </div>

                                                        <div class="tab-pane" id="tab-3">
                                                            <div class="table-responsive">
                                                                <table class="table table-hover notification">
                                                                   <tbody>
                                                                        
                                                                   </tbody>
                                                                </table>
                                                            </div>
                                                        </div>

                                                        <div class="tab-pane" id="tab-4">
                                                            <div class="table-responsive">
                                                                <table class="table table-hover notification">
                                                                    <tbody>
                                                                        
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div> -->

                                </div><!-- ibox-content-->
                        </div><!--ibox-->
                    </div><!--col-lg-9-->

                    <div class="col-lg-3">
                        <div class="ibox">
                            <div class="ibox-content">
                                    <h3><i class="fa fa-paperclip mr10"></i>ticket files</h3>
                                    <ul class="list-unstyled project-files" ng-if="docs.length==0">
                                        <li>- no files -</li>
                                    </ul>
                                    <ul class="list-unstyled project-files" ng-if="docs.length>0">
                                        <li ng-repeat="doc in docs" ><a href="{{doc.link}}" target="_blank" class="ticketFile"><i class="fa fa-download"></i> {{doc.name}}</a><button class="ticketFileTrash fxw-alert-delete" ng-click="deleteFileTicket(doc.id)"><i class="fa fa-close"></i></button></li>
                                    </ul>
                                    <div class="text-center m-t-md" ng-if="isclient">
                                        <a  class="btn btn-xs btn-default" data-toggle="modal" data-target="#upload-file"><i class="fa fa-upload"></i> upload file</a>
                                    </div>
                                </div>
                        </div>
                    </div>
                    
            
            </div><!--row-->
            </div> <!-- wrapper-->
            <!--main-->

            <!--footer-->
            <div class="footer">
                <div>
                     &copy;2015 &middot; <b>flexwork.io</b> &middot; <a href="privacy-terms-fxw.html">Privacy and Terms</a> &middot; <a href="imprint-fxw.html">Imprint</a>
                </div>
            </div>
            <!--end footer-->
<div class="modal inmodal fade" id="add-estimation" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus modal-fa-icon"></i> Estimation</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12"> 
                            <div class="form-group project-status">
                                <div class="select-option m0" style="width:100%;" ng-if="isbackend">
                                    <select select-two ng-model="$parent.estimation" id="selectest" >
                                        <option selected="selected" >Select</option>
                                        <option value="0.5">0.5 h</option>
                                        <option value="1">1 h</option>
                                        <option value="1.5">1.5 h</option>
                                        <option value="2">2 h</option>
                                        <option value="2.5">2.5 h</option>
                                        <option value="3">3 h</option>
                                        <option value="3.5">3.5 h</option>
                                        <option value="4">4 h</option>
                                    </select>
                                </div>
                                 <div class="select-option m0" style="width:100%;" ng-if="isfrontend">
                                    <select select-two ng-model="$parent.estimation" id="selectest">
                                        <option selected="selected" >Select</option>
                                        <option value="0.5">0.5 h</option>
                                        <option value="1">1 h</option>
                                        <option value="1.5">1.5 h</option>
                                        <option value="2">2 h</option>
                                        <option value="2.5">2.5 h</option>
                                        <option value="3">3 h</option>
                                        <option value="3.5">3.5 h</option>
                                        <option value="4">4 h</option>
                                        <option value="4.5">4.5 h</option>
                                        <option value="5">5 h</option>
                                        <option value="5.5">5.5 h</option>
                                        <option value="6">6 h</option>
                                        <option value="6.5">6.5 h</option>
                                        <option value="7">7 h</option>
                                        <option value="7.5">7.5 h</option>
                                        <option value="8">8 h</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="setEstimation()">save</button>
                </div>
            </div>
        </div>
</div>

<!--modal see reject messages-->
    <div class="modal inmodal fade" id="reject-messages" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-m">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-undo modal-fa-icon"></i> Rejects</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                             <!-- table project list -->    
                                    <div class="table-responsive">
                                        <table class="table table-hover responsive">
                                            <tbody>
                                                <tr>
                                                    <td width="50" class="project-table-head"></td>
                                                    <td width="" class="project-table-head">Messages</td>
                                                </tr>

                                                <tr>
                                                    <td class="reject-arrow">
                                                        <i class="fa fa-angle-right"></i>
                                                    </td>
                                                    <td class="reject-message">
                                                      {{rejectionmessage}}
                                                    </td>
                                                </tr>                                                                                                  
                                            </tbody>
                                        </table>
                                    </div>
                                <!-- end table project list-->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div> 
<div class="modal inmodal fade" id="add-story" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" ng-if='!isedit'><i class="fa fa-plus modal-fa-icon" ></i> Add Story</h4>
                    <h4 class="modal-title" ng-if='isedit'><i class="fa fa-plus modal-fa-icon" ></i> Edit Story</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12"> 

                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Story Title" ng-model="storytitle">
                            </div>
                            <div class="form-group">
                                <div class="select-option m-0" style="width:100%;">
                                       <select class="select2" ng-model="assignto" id="selectassign" ng-options="[member.name,' ',member.surname,', ',member.role.Text].join('') for member in team track by member.order">
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" >
                                <select class="select3" ng-options="type as type.text for type in taskTypes.types track by type.type" ng-model="storytype" style="width:100%;">
                                </select>
                            </div>
                            <div class="form-group m0">
                                 <div text-angular  ta-toolbar="[['h3','p','bold','ul','ol','insertLink','undo']]" ng-model="storydescription"></div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="createStory()">Save</button>
                </div>
            </div>
        </div>
       
</div>
<div class="modal inmodal fade" id="add-bug" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" ng-if='!isedit'><i class="fa fa-plus modal-fa-icon" ></i> Add Bug</h4>
                    <h4 class="modal-title" ng-if='isedit'><i class="fa fa-plus modal-fa-icon" ></i> Edit Bug</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12"> 

                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Bug Title" ng-model="storytitle">
                            </div>
                            <div class="form-group" ng-if='isTeamLeader'>
                                <div class="select-option m-0" style="width:100%;">
                                       <select select-two  ng-model="$parent.assignto" id="selectassignbug" ng-options="[member.name,' ',member.surname,', ',member.role.Text].join('') for member in team track by member.order">
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m0">
                                 <div text-angular  ta-toolbar="[['h3','p','bold','ul','ol','insertLink','undo']]" ng-model="storydescription"></div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="createStory()">Save</button>
                </div>
            </div>
        </div>
       
</div>
        </div>
        <!--end page wrapper-->
<div class="modal inmodal fade" id="reject-ticket" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus modal-fa-icon"></i> Reject Ticket</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                            <div class="form-group mb0">
                                 <textarea class="form-control textarea-keybox" placeholder="Rejection message" ng-model="rejectionmessage"></textarea>
                            </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="rejectTicket(rejectedticket)">Reject</button>
                </div>
            </div>
        </div>
    </div>
<div class="modal inmodal fade" id="reject-bug" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus modal-fa-icon"></i> Reject Bug</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                            <div class="form-group mb0">
                                 <textarea class="form-control textarea-keybox" placeholder="Rejection message" ng-model="rejectionbugmessage"></textarea>
                            </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="rejectBug()">Reject</button>
                </div>
            </div>
        </div>
    </div>
    <!--modal upload file-->
<div class="modal inmodal fade" id="upload-file" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-m">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-upload modal-fa-icon" ></i> Upload File</h4>
                </div>
                <div class="modal-body">
                    <div class="row mb10 aleft">

                        <div class="col-lg-12 mb20">
                            <input  id="upfiles" name="Datei" type="file"> 
                        </div>

                    </div><!--row-->
                  
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="uploadFile()">upload</button>
                </div>
            </div>
        </div>
</div>
<!--add realtime model-->
<div class="modal inmodal fade in" id="add-realtime" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title"><i class="fa fa-clock-o modal-fa-icon"></i> add realtime</h4>
                </div>
                <div class="modal-body">
                    <div class="row header-ticket-types">

                        <div class="col-lg-12 p15 header-add-member">
                            <div class="form-group fleft m0 mr10">
                                <input type="text" placeholder="time(0.0)" class="form-control" ng-model="realtime">
                            </div>
                            <div class="form-group m0">
                                <button class="btn btn-primary" type="button" ng-click="setRealtime()"><i class="fa fa-plus mr5"></i> add</button>
                            </div>
                        </div>

                        <div class="col-lg-12 mt20">
                            <div class="table-responsive">
                                <table class="table table-hover table-striped notification mb0">
                                    <thead>
                                        <tr><th width="100">Name</th>
                                        <th width="100">Date</th>
                                        <th width="100">Realtime</th>
                                        <th width="80" class="aright">Action</th>
                                    </tr></thead>
                                    <tbody>
                                        <tr ng-repeat="realtime in realtimes">
                                            <td>{{assigned.name}} {{assigned.surname}}</td>
                                            <td>{{realtime.date}}</td>
                                            <td>{{realtime.time}} h</td>
                                            <td class="aright" ng-if="realtime.editable">
                                                <button type="button" class="btn btn-white btn-sm fxw-alert-delete" role="button" ng-click="deleteRealtime(realtime)"><i class="fa fa-close"></i></button>
                                                <button type="button" class="btn btn-white btn-sm" role="button" data-toggle="modal" ng-click="editRealtime(realtime)"><i class="fa fa-pencil"></i></button>
                                            </td>
                                             <td class="aright" ng-if="!realtime.editable">
                                                <button type="button" class="btn btn-white btn-sm fxw-alert-delete" role="button" disabled="disabled"><i class="fa fa-close"></i></button>
                                                <button type="button" class="btn btn-white btn-sm" role="button" data-toggle="modal" data-target="#edit-realtime" disabled="disabled"><i class="fa fa-pencil"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bold">Total</td>
                                            <td></td>
                                            <td class="bold">{{totalrealtime}} h</td>
                                            <td class="aright"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                        <!-- end table project list-->
                        <div class="col-lg-12 clear-both aright mt20 mb20 p15 pr20 realtime-info-box">
                            <span class="realtime-info-text">
                                <i class="fa fa-info-circle mr5"></i>after saving you can not edit and delete it
                            </span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning fleft" ng-click="sendToTl()">save &amp; deliver to team lead</button>
                    <button type="button" class="btn btn-white" data-dismiss="modal">close</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">save</button>
                </div>
            </div>
        </div>
</div>
  <!--modal edit realtime-->
    <div class="modal inmodal fade" id="edit-realtime" role="dialog"  aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">close</span></button>
                    <h4 class="modal-title"><i class="fa fa-pencil modal-fa-icon"></i> edit realtime</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12"> 
                            <div class="form-group project-status">
                                <input type="text" placeholder="time(0.0)" class="form-control" ng-model="editrealtime">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="seteditRealtime()">save</button>
                </div>
            </div>
        </div>
    </div>